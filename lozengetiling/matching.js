function Reduction(t){const n=t.length,o=n/2;let e=new Float64Array(n*n),r=new Int32Array(n*n);for(let o=0;o<n;o++)for(let l=0;l<n;l++)r[l*n+o]=0==t[o][l],e[l*n+o]=t[o][l]+(0==t[o][l]);const l=Math.ceil(t.length/2),c=new Float32Array(l*(l+1)*(2*l+1)/6);let s=-1;for(let t=0;t<=o-1;t++){const l=(n+1)*t;for(let f=o-t;f--;)for(let a=o-t;a--;){s++;const t=2*(f*n+a)+l,o=r[t],i=r[t+1],h=r[t+n],u=r[t+n+1],g=o+u,w=h+i;if(w>g){r[t]*=-1,r[t+1]=h-g,r[t+n]=i-g,r[t+n+1]*=-1;const o=e[t+1],l=1/e[t],f=1/e[t+n+1];e[t+1]=e[t+n]*l*f,e[t+n]=o*l*f,e[t]=l,e[t+n+1]=f,c[s]=1}else if(g==w){r[t]*=-1,r[t+1]*=-1,r[t+n]*=-1,r[t+n+1]*=-1;const o=e[t],l=e[t+1],f=e[t+n],a=e[t+n+1];let i=o*a+f*l;e[t]=a/i,e[t+1]=f/i,e[t+n]=l/i,e[t+n+1]=o/i,c[s]=o*a/i}else{r[t]=u-w,r[t+1]*=-1,r[t+n]*=-1,r[t+n+1]=o-w;const l=e[t],c=1/e[t+1],s=1/e[t+n];e[t]=e[t+n+1]*s*c,e[t+n+1]=l*s*c,e[t+1]=c,e[t+n]=s}}}return c}function Matching(t,n,o=""){const e=new Uint8Array((n+2)*(n+2)),r=n/2;let l=n+2;const c=t.length;for(let n=0;n<=r;n++){const o=(1+l)*(r-n+1),s=[];for(let t=0;t<=2*(n-1);t+=2)for(let r=0;r<=2*(n-1);r+=2){const n=t*l+r+o;switch(e[n]+e[n+1]+e[n+l]+e[n+l+1]){case 1:const o=e[n];e[n]=e[n+l+1],e[n+l+1]=o;const c=e[n+l];e[n+l]=e[n+1],e[n+1]=c;break;case 2:e[n]=0,e[n+1]=0,e[n+l]=0,e[n+l+1]=0,s.push(t,r);break;case 0:s.push(t,r)}}for(let r=0,f=s.length;r<f;r+=2){const f=s[r]*l+s[r+1]+o;if(!(e[f-1]||e[f-l]||e[f+2]||e[f+l-1])){const o=t[c-(s[r+1]/2*n+s[r]/2+1+(n-1)*n*(2*n-1)/6)];Math.random()<o?(e[f]=1,e[f+l+1]=1):(e[f+1]=1,e[f+l]=1)}}}const s=[];for(let t=n;t>=1;t--){const o=new Uint8Array(n);for(let r=1;r<=n;r++)o[r-1]=e[t*l+r];s.push(o)}return s}function Coloring(t,n){const o=new Float32Array((n+2)*(n+2)),e=n/2;let r=n+2,l=t.length;for(let n=0;n<=e;n++){const c=(1+r)*(e-n+1);for(let e=0;e<=2*(n-1);e+=2)for(let s=0;s<=2*(n-1);s+=2){const f=e*r+s+c,a=o[f],i=o[f+1],h=o[f+r],u=o[f+r+1],g=1-a-i-h-u,w=t[l-(s/2*n+e/2+1+(n-1)*n*(2*n-1)/6)];o[f]=u+g*w,o[f+1]=h+g*(1-w),o[f+r]=i+g*(1-w),o[f+r+1]=a+g*w}}const c=[];for(let t=n;t>=1;t--){const e=new Float64Array(n);for(let l=1;l<=n;l++)e[l-1]=o[t*r+l];c.push(e)}return c}export{Reduction,Matching,Coloring};